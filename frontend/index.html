<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Crypto Loans - BTC Collateral Lending</title>
    <link rel="stylesheet" href="styles/main.css" />
  </head>
  <body>
    <header class="hero">
      <h1>Crypto Loans</h1>
      <p>Solicita préstamos en euros usando tus BTC como colateral sin ceder la custodia.</p>
      <button id="connectWallet">Conectar Wallet Web3</button>
    </header>

    <main>
      <section class="card">
        <h2>Resumen de cuenta</h2>
        <div class="grid">
          <div>
            <span class="label">Wallet conectada</span>
            <span id="walletAddress">No conectada</span>
          </div>
          <div>
            <span class="label">Saldo BTC detectado</span>
            <span id="btcBalance">0.00000000 BTC</span>
          </div>
          <div>
            <span class="label">Saldo BTC.b disponible</span>
            <span id="btcbBalance">0.0000 BTC.b</span>
          </div>
          <div>
            <span class="label">Cuenta Monerium</span>
            <span id="moneriumStatus">No vinculada</span>
          </div>
          <div>
            <span class="label">Precio BTC/EUR de referencia</span>
            <span id="btcEurPrice">Actualizando…</span>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Simulador de préstamo</h2>
        <form id="loanForm">
          <label>Cantidad deseada en EUR
            <input type="number" id="eurAmount" placeholder="1000" min="100" step="50" required />
          </label>
          <label>LTV objetivo (máx 70%)
            <input type="range" id="ltv" min="30" max="70" value="50" />
            <span id="ltvValue">50%</span>
          </label>
          <label>BTC requeridos
            <input type="text" id="btcRequired" readonly />
          </label>
          <label>Duración del préstamo (días)
            <input type="number" id="duration" min="7" max="365" value="90" />
          </label>
          <label>Método de desembolso
            <select id="disburseVia">
              <option value="wallet">EURe a wallet vinculada</option>
              <option value="monerium">Transferencia SEPA vía Monerium</option>
            </select>
          </label>
          <label>IBAN (si usas Monerium)
            <input type="text" id="iban" placeholder="ES00 0000 0000 0000 0000 0000" />
          </label>
          <label>Referencia de transferencia
            <input type="text" id="reference" placeholder="Referencia de pago" />
          </label>
          <button type="submit">Request Loan</button>
        </form>
        <div id="simulationOutput"></div>
      </section>

      <section class="card">
        <h2>Estado de la plataforma</h2>
        <p id="platformMetrics">Cargando métricas…</p>
      </section>

      <section class="card">
        <h2>Préstamos activos</h2>
        <table id="loansTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Principal</th>
              <th>Colateral BTC.b</th>
              <th>LTV actual</th>
              <th>Estado</th>
              <th>Fecha límite</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <section class="card">
        <h2>Repagar préstamo</h2>
        <form id="repayForm">
          <label>Identificador del préstamo
            <input type="text" id="repayLoanId" required />
          </label>
          <label>Importe EURe
            <input type="number" id="repayAmount" required min="0" step="0.01" />
          </label>
          <label>Método de repago
            <select id="repayMethod">
              <option value="wallet">EURe desde wallet</option>
              <option value="iban">Transferencia SEPA a Monerium</option>
            </select>
          </label>
          <button type="submit">Enviar repago</button>
        </form>
        <div id="repayStatus"></div>
      </section>
    </main>

    <footer>
      <p>Integrado con Monerium, Avalanche y Ethereum. Recuerda mantener un margen de LTV seguro.</p>
    </footer>
    <script src="js/app.js"></script>
  </body>
</html>
